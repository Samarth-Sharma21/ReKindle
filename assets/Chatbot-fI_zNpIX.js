import{y as ae,z as le,r as a,C as ce,E as de,F as pe,g as X,G as ue,H as he,j as e,J as K,K as me,N as ge,O as q,Q as xe,d as V,h as fe,B as x,q as ye,I as O,P as G,R as U,s as Q,U as we}from"./index-BBUo2mLe.js";import{C as be}from"./Close-BbOGWLvZ.js";import{D as ve}from"./cjs-CsvgLO3y.js";import{T as je}from"./TextField-B5vPP40f.js";function Se(r){return ae("MuiCollapse",r)}le("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Ce=r=>{const{orientation:o,classes:i}=r,h={root:["root",`${o}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${o}`],wrapperInner:["wrapperInner",`${o}`]};return ge(h,Se,i)},Ie=K("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(r,o)=>{const{ownerState:i}=r;return[o.root,o[i.orientation],i.state==="entered"&&o.entered,i.state==="exited"&&!i.in&&i.collapsedSize==="0px"&&o.hidden]}})(xe(({theme:r})=>({height:0,overflow:"hidden",transition:r.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:r.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:o})=>o.state==="exited"&&!o.in&&o.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),ze=K("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(r,o)=>o.wrapper})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Ee=K("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(r,o)=>o.wrapperInner})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),B=a.forwardRef(function(o,i){const h=ce({props:o,name:"MuiCollapse"}),{addEndListener:p,children:E,className:R,collapsedSize:f="0px",component:u,easing:b,in:m,onEnter:v,onEntered:j,onEntering:D,onExit:T,onExited:$,onExiting:M,orientation:k="vertical",style:y,timeout:d=de.standard,TransitionComponent:N=pe,...n}=h,s={...h,orientation:k,collapsedSize:f},S=Ce(s),Y=X(),Z=ue(),g=a.useRef(null),F=a.useRef(),H=typeof f=="number"?`${f}px`:f,C=k==="horizontal",I=C?"width":"height",P=a.useRef(null),_=he(i,P),w=t=>l=>{if(t){const c=P.current;l===void 0?t(c):t(c,l)}},A=()=>g.current?g.current[C?"clientWidth":"clientHeight"]:0,ee=w((t,l)=>{g.current&&C&&(g.current.style.position="absolute"),t.style[I]=H,v&&v(t,l)}),te=w((t,l)=>{const c=A();g.current&&C&&(g.current.style.position="");const{duration:z,easing:W}=q({style:y,timeout:d,easing:b},{mode:"enter"});if(d==="auto"){const J=Y.transitions.getAutoHeightDuration(c);t.style.transitionDuration=`${J}ms`,F.current=J}else t.style.transitionDuration=typeof z=="string"?z:`${z}ms`;t.style[I]=`${c}px`,t.style.transitionTimingFunction=W,D&&D(t,l)}),ne=w((t,l)=>{t.style[I]="auto",j&&j(t,l)}),oe=w(t=>{t.style[I]=`${A()}px`,T&&T(t)}),se=w($),re=w(t=>{const l=A(),{duration:c,easing:z}=q({style:y,timeout:d,easing:b},{mode:"exit"});if(d==="auto"){const W=Y.transitions.getAutoHeightDuration(l);t.style.transitionDuration=`${W}ms`,F.current=W}else t.style.transitionDuration=typeof c=="string"?c:`${c}ms`;t.style[I]=H,t.style.transitionTimingFunction=z,M&&M(t)}),ie=t=>{d==="auto"&&Z.start(F.current||0,t),p&&p(P.current,t)};return e.jsx(N,{in:m,onEnter:ee,onEntered:ne,onEntering:te,onExit:oe,onExited:se,onExiting:re,addEndListener:ie,nodeRef:P,timeout:d==="auto"?null:d,...n,children:(t,{ownerState:l,...c})=>e.jsx(Ie,{as:u,className:me(S.root,R,{entered:S.entered,exited:!m&&H==="0px"&&S.hidden}[t]),style:{[C?"minWidth":"minHeight"]:H,...y},ref:_,ownerState:{...s,state:t},...c,children:e.jsx(ze,{ownerState:{...s,state:t},className:S.wrapper,ref:g,children:e.jsx(Ee,{ownerState:{...s,state:t},className:S.wrapperInner,children:E})})})})});B&&(B.muiSupportAuto=!0);const Re=V(e.jsx("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"})),L=V(e.jsx("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"})),De=V(e.jsx("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2m-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"})),Pe=()=>{const[r,o]=a.useState(!1),[i,h]=a.useState([{text:"Hello! I'm your memory assistant. How can I help you today?",sender:"bot"}]),[p,E]=a.useState(""),R=a.useRef(null);X();const{mode:f}=fe(),u=f==="dark",b=a.useRef(null),[m,v]=a.useState(!1),[j,D]=a.useState(()=>{const n=localStorage.getItem("chatbotPosition");return n?JSON.parse(n):{x:0,y:0}}),T=(n,s)=>{D({x:s.x,y:s.y})},$=()=>{v(!0)},M=()=>{v(!1),localStorage.setItem("chatbotPosition",JSON.stringify(j))},k=()=>{var n;(n=R.current)==null||n.scrollIntoView({behavior:"smooth"})};a.useEffect(()=>{k()},[i]);const y=()=>{if(p.trim()==="")return;const n=[...i,{text:p,sender:"user"}];h(n),E(""),setTimeout(()=>{const s=d(p);h([...n,{text:s,sender:"bot"}])},1e3)},d=n=>{const s=n.toLowerCase();return s.includes("hello")||s.includes("hi")?"Hello! How can I assist you today?":s.includes("memory")||s.includes("memories")?"I can help you with managing memories. You can add new memories, view existing ones, or organize them by date.":s.includes("help")?`I can help you with: 
1. Adding new memories
2. Viewing existing memories
3. Managing your account
4. Understanding the features
What would you like to know more about?`:s.includes("login")||s.includes("sign in")?"To login, you can use your email and password. If you're a patient, use the patient login. If you're a family member, use the family login.":s.includes("register")||s.includes("sign up")?"You can register as either a patient or a family member. Patients can create and manage their memories, while family members can help manage a patient's memories.":`I'm here to help! You can ask me about:
- How to use the memory features
- Login and registration
- Managing memories
- Account settings
What would you like to know?`},N=n=>{n.key==="Enter"&&!n.shiftKey&&(n.preventDefault(),y())};return e.jsx(ve,{nodeRef:b,handle:".drag-handle",position:j,onDrag:T,onStart:$,onStop:M,bounds:"parent",children:e.jsxs(x,{ref:b,sx:{position:"fixed",bottom:20,right:20,zIndex:1e3,transition:"filter 0.2s",filter:m?"drop-shadow(0 0 8px rgba(0, 0, 0, 0.5))":"none"},children:[!r&&e.jsx(ye.div,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"drag-handle",children:e.jsx(O,{onClick:()=>o(!0),sx:{bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"},width:56,height:56,boxShadow:3,cursor:m?"grabbing":"grab"},children:e.jsx(L,{})})}),e.jsx(B,{in:r,children:e.jsxs(G,{elevation:m?8:3,sx:{width:350,height:500,display:"flex",flexDirection:"column",borderRadius:2,overflow:"hidden",bgcolor:"background.paper",transition:"box-shadow 0.2s ease"},children:[e.jsxs(x,{className:"drag-handle",sx:{bgcolor:"primary.main",color:"white",p:2,display:"flex",alignItems:"center",justifyContent:"space-between",cursor:m?"grabbing":"grab",position:"relative","&:hover":{"&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(255, 255, 255, 0.1)"}}},children:[e.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(U,{sx:{bgcolor:"white",color:"primary.main",width:32,height:32},children:e.jsx(L,{fontSize:"small"})}),e.jsx(Q,{variant:"subtitle1",children:"Memory Assistant"}),e.jsx(De,{fontSize:"small",sx:{ml:1,opacity:.7}})]}),e.jsx(O,{size:"small",onClick:()=>o(!1),sx:{color:"white"},children:e.jsx(be,{})})]}),e.jsxs(x,{sx:{flex:1,overflowY:"auto",p:2,display:"flex",flexDirection:"column",gap:2,bgcolor:u?"background.paper":"grey.50"},children:[i.map((n,s)=>e.jsx(we,{in:!0,children:e.jsxs(x,{sx:{display:"flex",justifyContent:n.sender==="user"?"flex-end":"flex-start",gap:1},children:[n.sender==="bot"&&e.jsx(U,{sx:{bgcolor:"primary.main",color:"white",width:32,height:32},children:e.jsx(L,{fontSize:"small"})}),e.jsx(G,{elevation:1,sx:{p:1.5,maxWidth:"80%",bgcolor:n.sender==="user"?"primary.main":u?"grey.800":"grey.100",color:n.sender==="user"?"white":u?"grey.100":"text.primary",borderRadius:2,whiteSpace:"pre-line"},children:e.jsx(Q,{variant:"body2",children:n.text})}),n.sender==="user"&&e.jsx(U,{sx:{bgcolor:"primary.main",color:"white",width:32,height:32},children:"U"})]})},s)),e.jsx("div",{ref:R})]}),e.jsx(x,{sx:{p:2,borderTop:1,borderColor:"divider",bgcolor:u?"background.paper":"white"},children:e.jsxs(x,{sx:{display:"flex",gap:1},children:[e.jsx(je,{fullWidth:!0,size:"small",placeholder:"Type your message...",value:p,onChange:n=>E(n.target.value),onKeyPress:N,multiline:!0,maxRows:3,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(O,{color:"primary",onClick:y,disabled:p.trim()==="",sx:{alignSelf:"flex-end",bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"},"&:disabled":{bgcolor:u?"grey.700":"grey.300",color:u?"grey.500":void 0}},children:e.jsx(Re,{})})]})})]})})]})})};export{Pe as C};

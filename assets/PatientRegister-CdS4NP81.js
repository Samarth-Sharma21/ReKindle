import{u as S,l as D,r as l,j as e,B as d,m as j,e as w,n as p,P as E,L as B,h as m,I as y,i as q,s as v}from"./index-EbGFy7QZ.js";import{V as P,a as C}from"./VisibilityOff-D29StoZJ.js";import{A as F}from"./ArrowBack-bxOK_F0O.js";import{P as L}from"./Phone-BYtDuftr.js";import{C as z}from"./Container-DBmzn7gd.js";import{A as H}from"./Alert-DiCaf1ND.js";import{T as i}from"./TextField-B78R-ctW.js";import{I as h}from"./InputAdornment-BA6naVc2.js";import{F as N}from"./FormControlLabel-YOGRfzJi.js";import{C as V}from"./Checkbox-DL0U9BhH.js";import"./useFormControl-CIaf7Soj.js";const ee=()=>{const I=S(),{login:M}=D(),[r,A]=l.useState({name:"",mobile:"",email:"",password:"",confirmPassword:"",agreeTerms:!1}),[c,R]=l.useState(!1),[u,T]=l.useState(!1),[g,o]=l.useState(""),a=t=>{const{name:x,value:s,checked:n}=t.target;A({...r,[x]:x==="agreeTerms"?n:s})},b=t=>{t==="password"?R(!c):T(!u)},W=async t=>{if(t.preventDefault(),!r.name||!r.mobile||!r.email||!r.password||!r.confirmPassword){o("Please fill in all fields");return}if(!r.agreeTerms){o("Please agree to the terms and conditions");return}if(r.password!==r.confirmPassword){o("Passwords do not match");return}if(!/^[0-9]{10}$/.test(r.mobile.replace(/[^0-9]/g,""))){o("Please enter a valid 10-digit Indian mobile number");return}try{const{data:s,error:n}=await v.auth.signUp({email:r.email,password:r.password});if(n)throw n;const{data:k,error:f}=await v.from("patients").insert([{id:s.user.id,name:r.name,mobile:r.mobile,email:r.email}]);if(f)throw f;console.log("Patient registered:",k),I("/patient/dashboard")}catch(s){console.error("Error registering patient:",s.message),o(s.message)}};return e.jsx(d,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",bgcolor:"background.default",py:4},children:e.jsx(z,{maxWidth:"sm",children:e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(w,{component:p,to:"/",startIcon:e.jsx(F,{}),sx:{mb:4},children:"Back to Home"}),e.jsxs(E,{elevation:3,sx:{p:4,borderRadius:2,bgcolor:"background.paper"},children:[e.jsxs(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:3},children:[e.jsx(d,{sx:{mb:2},children:e.jsx(B,{size:"large"})}),e.jsx(m,{variant:"h5",gutterBottom:!0,sx:{fontWeight:500},children:"Create Patient Account"}),e.jsx(m,{variant:"body1",color:"text.secondary",align:"center",sx:{mb:4,maxWidth:"400px",mx:"auto"},children:"Register to start preserving your precious memories."})]}),g&&e.jsx(H,{severity:"error",sx:{mb:3},children:g}),e.jsxs("form",{onSubmit:W,children:[e.jsx(i,{fullWidth:!0,label:"Full Name",name:"name",value:r.name,onChange:a,margin:"normal",variant:"outlined",required:!0,InputProps:{sx:{borderRadius:2}}}),e.jsx(i,{fullWidth:!0,label:"Mobile Number",name:"mobile",value:r.mobile,onChange:a,margin:"normal",variant:"outlined",required:!0,placeholder:"e.g. 9876543210",InputProps:{sx:{borderRadius:2},startAdornment:e.jsx(h,{position:"start",children:e.jsx(L,{color:"action"})})},helperText:"Enter a 10-digit Indian mobile number"}),e.jsx(i,{fullWidth:!0,label:"Email Address",name:"email",type:"email",value:r.email,onChange:a,margin:"normal",variant:"outlined",required:!0,InputProps:{sx:{borderRadius:2}}}),e.jsx(i,{fullWidth:!0,label:"Password",name:"password",type:c?"text":"password",value:r.password,onChange:a,margin:"normal",variant:"outlined",required:!0,InputProps:{sx:{borderRadius:2},endAdornment:e.jsx(h,{position:"end",children:e.jsx(y,{"aria-label":"toggle password visibility",onClick:()=>b("password"),edge:"end",children:c?e.jsx(P,{}):e.jsx(C,{})})})}}),e.jsx(i,{fullWidth:!0,label:"Confirm Password",name:"confirmPassword",type:u?"text":"password",value:r.confirmPassword,onChange:a,margin:"normal",variant:"outlined",required:!0,InputProps:{sx:{borderRadius:2},endAdornment:e.jsx(h,{position:"end",children:e.jsx(y,{"aria-label":"toggle password visibility",onClick:()=>b("confirm"),edge:"end",children:u?e.jsx(P,{}):e.jsx(C,{})})})},sx:{mb:2}}),e.jsx(N,{control:e.jsx(V,{name:"agreeTerms",checked:r.agreeTerms,onChange:a,color:"primary"}),label:e.jsxs(m,{variant:"body2",children:["I agree to the"," ",e.jsx(p,{to:"/terms",style:{color:"inherit",fontWeight:"bold"},children:"Terms and Conditions"})]}),sx:{mb:3}}),e.jsx(w,{component:j.button,whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",fullWidth:!0,variant:"contained",color:"primary",size:"large",sx:{py:1.5,borderRadius:2,fontSize:"1.1rem",mb:2},children:"Register"})]}),e.jsx(q,{sx:{my:3}}),e.jsx(d,{sx:{textAlign:"center"},children:e.jsxs(m,{variant:"body2",color:"text.secondary",children:["Already have an account?"," ",e.jsx(p,{to:"/patient/login",style:{color:"inherit",fontWeight:"bold"},children:"Log in here"})]})})]})]})})})};export{ee as default};

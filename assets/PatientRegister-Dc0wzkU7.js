import{u as S,r as l,j as e,B as d,C as D,F as j,a as w,o as h,A as E,P as B,T as m,b as q,au as n,be as p,aH as F,K as y,bf as v,bg as P,aS as H,bh as L,H as z}from"./vendor-BpQ4GIZC.js";import{u as N,s as C}from"./addMemory-C0-Amh-w.js";import{L as V}from"./index-AR_LmOrU.js";const $=()=>{const I=S(),{login:K}=N(),[r,R]=l.useState({name:"",mobile:"",email:"",password:"",confirmPassword:"",agreeTerms:!1}),[c,A]=l.useState(!1),[u,T]=l.useState(!1),[g,t]=l.useState(""),a=o=>{const{name:x,value:s,checked:i}=o.target;R({...r,[x]:x==="agreeTerms"?i:s})},b=o=>{o==="password"?A(!c):T(!u)},W=async o=>{if(o.preventDefault(),!r.name||!r.mobile||!r.email||!r.password||!r.confirmPassword){t("Please fill in all fields");return}if(!r.agreeTerms){t("Please agree to the terms and conditions");return}if(r.password!==r.confirmPassword){t("Passwords do not match");return}if(!/^[0-9]{10}$/.test(r.mobile.replace(/[^0-9]/g,""))){t("Please enter a valid 10-digit Indian mobile number");return}try{const{data:s,error:i}=await C.auth.signUp({email:r.email,password:r.password});if(i)throw i;const{data:k,error:f}=await C.from("patients").insert([{id:s.user.id,name:r.name,mobile:r.mobile,email:r.email}]);if(f)throw f;console.log("Patient registered:",k),I("/patient/dashboard")}catch(s){console.error("Error registering patient:",s.message),t(s.message)}};return e.jsx(d,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",bgcolor:"background.default",py:4},children:e.jsx(D,{maxWidth:"sm",children:e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(w,{component:h,to:"/",startIcon:e.jsx(E,{}),sx:{mb:4},children:"Back to Home"}),e.jsxs(B,{elevation:3,sx:{p:4,borderRadius:2,bgcolor:"background.paper"},children:[e.jsxs(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:3},children:[e.jsx(d,{sx:{mb:2},children:e.jsx(V,{size:"large"})}),e.jsx(m,{variant:"h5",gutterBottom:!0,sx:{fontWeight:500},children:"Create Patient Account"}),e.jsx(m,{variant:"body1",color:"text.secondary",align:"center",sx:{mb:4,maxWidth:"400px",mx:"auto"},children:"Register to start preserving your precious memories."})]}),g&&e.jsx(q,{severity:"error",sx:{mb:3},children:g}),e.jsxs("form",{onSubmit:W,children:[e.jsx(n,{fullWidth:!0,label:"Full Name",name:"name",value:r.name,onChange:a,margin:"normal",variant:"outlined",required:!0,InputProps:{sx:{borderRadius:2}}}),e.jsx(n,{fullWidth:!0,label:"Mobile Number",name:"mobile",value:r.mobile,onChange:a,margin:"normal",variant:"outlined",required:!0,placeholder:"e.g. 9876543210",InputProps:{sx:{borderRadius:2},startAdornment:e.jsx(p,{position:"start",children:e.jsx(F,{color:"action"})})},helperText:"Enter a 10-digit Indian mobile number"}),e.jsx(n,{fullWidth:!0,label:"Email Address",name:"email",type:"email",value:r.email,onChange:a,margin:"normal",variant:"outlined",required:!0,InputProps:{sx:{borderRadius:2}}}),e.jsx(n,{fullWidth:!0,label:"Password",name:"password",type:c?"text":"password",value:r.password,onChange:a,margin:"normal",variant:"outlined",required:!0,InputProps:{sx:{borderRadius:2},endAdornment:e.jsx(p,{position:"end",children:e.jsx(y,{"aria-label":"toggle password visibility",onClick:()=>b("password"),edge:"end",children:c?e.jsx(v,{}):e.jsx(P,{})})})}}),e.jsx(n,{fullWidth:!0,label:"Confirm Password",name:"confirmPassword",type:u?"text":"password",value:r.confirmPassword,onChange:a,margin:"normal",variant:"outlined",required:!0,InputProps:{sx:{borderRadius:2},endAdornment:e.jsx(p,{position:"end",children:e.jsx(y,{"aria-label":"toggle password visibility",onClick:()=>b("confirm"),edge:"end",children:u?e.jsx(v,{}):e.jsx(P,{})})})},sx:{mb:2}}),e.jsx(H,{control:e.jsx(L,{name:"agreeTerms",checked:r.agreeTerms,onChange:a,color:"primary"}),label:e.jsxs(m,{variant:"body2",children:["I agree to the"," ",e.jsx(h,{to:"/terms",style:{color:"inherit",fontWeight:"bold"},children:"Terms and Conditions"})]}),sx:{mb:3}}),e.jsx(w,{component:j.button,whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",fullWidth:!0,variant:"contained",color:"primary",size:"large",sx:{py:1.5,borderRadius:2,fontSize:"1.1rem",mb:2},children:"Register"})]}),e.jsx(z,{sx:{my:3}}),e.jsx(d,{sx:{textAlign:"center"},children:e.jsxs(m,{variant:"body2",color:"text.secondary",children:["Already have an account?"," ",e.jsx(h,{to:"/patient/login",style:{color:"inherit",fontWeight:"bold"},children:"Log in here"})]})})]})]})})})};export{$ as default};

import{r as n,ao as O,j as s,ap as A,aq as T,ar as W,as as D,at as H,P as F,h as v,B as w,m as M,O as K,k as U,e as R}from"./index-C-AMN2PQ.js";import{C as q}from"./Container-Px_pG2SI.js";class G extends n.Component{getSnapshotBeforeUpdate(l){const e=this.props.childRef.current;if(e&&l.isPresent&&!this.props.isPresent){const r=e.offsetParent,u=r instanceof HTMLElement&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=e.offsetHeight||0,a.width=e.offsetWidth||0,a.top=e.offsetTop,a.left=e.offsetLeft,a.right=u-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function V({children:i,isPresent:l,anchorX:e}){const r=n.useId(),u=n.useRef(null),a=n.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:f}=n.useContext(O);return n.useInsertionEffect(()=>{const{width:x,height:t,top:g,left:o,right:m}=a.current;if(l||!u.current||!x||!t)return;const c=e==="left"?`left: ${o}`:`right: ${m}`;u.current.dataset.motionPopId=r;const h=document.createElement("style");return f&&(h.nonce=f),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${x}px !important;
            height: ${t}px !important;
            ${c}px !important;
            top: ${g}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[l]),s.jsx(G,{isPresent:l,childRef:u,sizeRef:a,children:n.cloneElement(i,{ref:u})})}const X=({children:i,initial:l,isPresent:e,onExitComplete:r,custom:u,presenceAffectsLayout:a,mode:f,anchorX:x})=>{const t=A(_),g=n.useId(),o=n.useCallback(c=>{t.set(c,!0);for(const h of t.values())if(!h)return;r&&r()},[t,r]),m=n.useMemo(()=>({id:g,initial:l,isPresent:e,custom:u,onExitComplete:o,register:c=>(t.set(c,!1),()=>t.delete(c))}),a?[Math.random(),o]:[e,o]);return n.useMemo(()=>{t.forEach((c,h)=>t.set(h,!1))},[e]),n.useEffect(()=>{!e&&!t.size&&r&&r()},[e]),f==="popLayout"&&(i=s.jsx(V,{isPresent:e,anchorX:x,children:i})),s.jsx(T.Provider,{value:m,children:i})};function _(){return new Map}const P=i=>i.key||"";function $(i){const l=[];return n.Children.forEach(i,e=>{n.isValidElement(e)&&l.push(e)}),l}const J=({children:i,custom:l,initial:e=!0,onExitComplete:r,presenceAffectsLayout:u=!0,mode:a="sync",propagate:f=!1,anchorX:x="left"})=>{const[t,g]=W(f),o=n.useMemo(()=>$(i),[i]),m=f&&!t?[]:o.map(P),c=n.useRef(!0),h=n.useRef(o),p=A(()=>new Map),[b,E]=n.useState(o),[C,B]=n.useState(o);D(()=>{c.current=!1,h.current=o;for(let y=0;y<C.length;y++){const d=P(C[y]);m.includes(d)?p.delete(d):p.get(d)!==!0&&p.set(d,!1)}},[C,m.length,m.join("-")]);const S=[];if(o!==b){let y=[...o];for(let d=0;d<C.length;d++){const j=C[d],z=P(j);m.includes(z)||(y.splice(d,0,j),S.push(j))}return a==="wait"&&S.length&&(y=S),B($(y)),E(o),null}const{forceRender:I}=n.useContext(H);return s.jsx(s.Fragment,{children:C.map(y=>{const d=P(y),j=f&&!t?!1:o===C||m.includes(d),z=()=>{if(p.has(d))p.set(d,!0);else return;let k=!0;p.forEach(L=>{L||(k=!1)}),k&&(I==null||I(),B(h.current),f&&(g==null||g()),r&&r())};return s.jsx(X,{isPresent:j,initial:!c.current||e?void 0:!1,custom:l,presenceAffectsLayout:u,mode:a,onExitComplete:j?void 0:z,anchorX:x,children:y},d)})})},Y=()=>{const[i,l]=n.useState(!1),[e,r]=n.useState("ready"),[u,a]=n.useState(0),[f,x]=n.useState(0),t={inhale:4,hold:2,exhale:6,totalCycles:3};n.useEffect(()=>{let p;return i&&(e==="ready"?(r("inhale"),a(t.inhale)):p=setInterval(()=>{a(b=>{if(b<=1){if(e==="inhale")return r("hold"),t.hold;if(e==="hold")return r("exhale"),t.exhale;if(e==="exhale"){const E=f+1;return x(E),E>=t.totalCycles?(l(!1),r("ready"),x(0),0):(r("inhale"),t.inhale)}}return b-1})},1e3)),()=>{clearInterval(p)}},[i,e,f]);const g=()=>{l(!0),r("ready"),x(0)},o=()=>{l(!1),r("ready"),a(0),x(0)},m=()=>{switch(e){case"inhale":return"Breathe in slowly...";case"hold":return"Hold your breath...";case"exhale":return"Breathe out slowly...";default:return"Press start when ready"}},c=()=>{switch(e){case"inhale":return"#6a5acd";case"hold":return"#ff8c69";case"exhale":return"#4a3b9c";default:return"#9d8ce0"}},h=()=>{if(!i||e==="ready")return 0;const p=e==="inhale"?t.inhale:e==="hold"?t.hold:t.exhale;return Math.min((p-u)/p*100,99.5)};return s.jsx(q,{maxWidth:"sm",children:s.jsxs(F,{elevation:3,sx:{p:4,borderRadius:4,display:"flex",flexDirection:"column",alignItems:"center",bgcolor:"background.paper"},children:[s.jsx(v,{variant:"h4",component:"h1",gutterBottom:!0,align:"center",color:"primary",children:"Breathing Exercise"}),s.jsx(v,{variant:"body1",paragraph:!0,align:"center",children:"Take a moment to relax with this guided breathing exercise. Follow the animation and breathe along."}),s.jsx(w,{sx:{position:"relative",my:4,display:"flex",justifyContent:"center"},children:s.jsx(J,{mode:"wait",children:s.jsxs(M.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.7,ease:"easeOut"},style:{position:"relative"},children:[s.jsx(K,{variant:"determinate",value:h(),size:200,thickness:4,sx:{color:c()}}),s.jsx(w,{sx:{position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(M.div,{animate:{scale:e==="inhale"?[1,1.3]:e==="exhale"?[1.3,1]:1.3,opacity:[.8,1,.8]},transition:{duration:e==="inhale"?t.inhale:e==="exhale"?t.exhale:0,ease:"easeInOut",opacity:{duration:e==="inhale"||e==="exhale"?2:0,repeat:e==="inhale"||e==="exhale"?1:0,repeatType:"reverse"}},children:s.jsx(U,{sx:{fontSize:80,color:c(),opacity:.8}})})})]},e)})}),s.jsxs(w,{sx:{textAlign:"center",mb:3},children:[s.jsx(v,{variant:"h5",gutterBottom:!0,children:m()}),i&&s.jsx(v,{variant:"h3",color:c(),children:u}),i&&s.jsxs(v,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["Cycle ",f+1," of ",t.totalCycles]})]}),s.jsx(w,{sx:{display:"flex",gap:2,justifyContent:"center"},children:i?s.jsx(R,{variant:"outlined",color:"primary",size:"large",onClick:o,"aria-label":"Stop breathing exercise",sx:{px:4,py:1.5,fontSize:"1.1rem"},children:"Stop"}):s.jsx(R,{variant:"contained",color:"primary",size:"large",onClick:g,"aria-label":"Start breathing exercise",sx:{px:4,py:1.5,fontSize:"1.1rem"},children:"Start Breathing"})})]})})};export{J as A,Y as B};

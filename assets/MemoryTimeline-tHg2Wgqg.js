import{d as R,j as e,J as j,a2 as Z,Q as z,a3 as X,y as T,z as U,r as h,E as W,a4 as le,H as A,N as O,s as x,a5 as ce,a6 as de,R as C,a7 as _,a8 as Y,e as ee,q as te,B as d,I as oe,a9 as pe,aa as $,Y as he,g as ue,P as se,V as xe,W as ge,w as me,x as fe}from"./index-C2jwSk0r.js";import"./cjs-DVMAjUwU.js";import{T as P,M as q}from"./TextSnippet-DAfjmW57.js";import{P as M}from"./Photo-CjybkoIb.js";import{L as re}from"./LocationOn-CdZrmAFE.js";import{P as ae}from"./People-BMTfjlb9.js";import{A as be}from"./AudioPlayer-DReQaWPa.js";import{C as je,a as ve}from"./CardContent-CFJjA2XK.js";import{C as w}from"./Chip-ChcIFS1b.js";import{f as K}from"./format-C03WXWVb.js";import{A as ye}from"./ArrowForward-BRRVjBzG.js";import{G as v}from"./Grid-B8CfK59C.js";import{C as J}from"./Container-CVIF3dFE.js";import{T as Ce,a as Q}from"./ToggleButtonGroup-Cdv8Xj84.js";const we=R(e.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})),Se=j(Z)(z(({theme:t})=>({display:"flex",marginLeft:`calc(${t.spacing(1)} * 0.5)`,marginRight:`calc(${t.spacing(1)} * 0.5)`,...t.palette.mode==="light"?{backgroundColor:t.palette.grey[100],color:t.palette.grey[700]}:{backgroundColor:t.palette.grey[700],color:t.palette.grey[100]},borderRadius:2,"&:hover, &:focus":{...t.palette.mode==="light"?{backgroundColor:t.palette.grey[200]}:{backgroundColor:t.palette.grey[600]}},"&:active":{boxShadow:t.shadows[0],...t.palette.mode==="light"?{backgroundColor:X(t.palette.grey[200],.12)}:{backgroundColor:X(t.palette.grey[600],.12)}}}))),ke=j(we)({width:24,height:16});function Me(t){const{slots:o={},slotProps:r={},...a}=t,i=t;return e.jsx("li",{children:e.jsx(Se,{focusRipple:!0,...a,ownerState:i,children:e.jsx(ke,{as:o.CollapsedIcon,ownerState:i,...r.collapsedIcon})})})}function Ae(t){return U("MuiBreadcrumbs",t)}const Re=T("MuiBreadcrumbs",["root","ol","li","separator"]),ze=t=>{const{classes:o}=t;return O({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},Ae,o)},Ie=j(x,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(t,o)=>[{[`& .${Re.li}`]:o.li},o.root]})({}),Be=j("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(t,o)=>o.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),He=j("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(t,o)=>o.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function Ve(t,o,r,a){return t.reduce((i,s,c)=>(c<t.length-1?i=i.concat(s,e.jsx(He,{"aria-hidden":!0,className:o,ownerState:a,children:r},`separator-${c}`)):i.push(s),i),[])}const ct=h.forwardRef(function(o,r){const a=W({props:o,name:"MuiBreadcrumbs"}),{children:i,className:s,component:c="nav",slots:p={},slotProps:g={},expandText:n="Show path",itemsAfterCollapse:l=1,itemsBeforeCollapse:m=1,maxItems:f=8,separator:y="/",...I}=a,[S,B]=h.useState(!1),u={...a,component:c,expanded:S,expandText:n,itemsAfterCollapse:l,itemsBeforeCollapse:m,maxItems:f,separator:y},k=ze(u),ie=le({elementType:p.CollapsedIcon,externalSlotProps:g.collapsedIcon,ownerState:u}),F=h.useRef(null),ne=b=>{const V=()=>{B(!0);const G=F.current.querySelector("a[href],button,[tabindex]");G&&G.focus()};return m+l>=b.length?b:[...b.slice(0,m),e.jsx(Me,{"aria-label":n,slots:{CollapsedIcon:p.CollapsedIcon},slotProps:{collapsedIcon:ie},onClick:V},"ellipsis"),...b.slice(b.length-l,b.length)]},H=h.Children.toArray(i).filter(b=>h.isValidElement(b)).map((b,V)=>e.jsx("li",{className:k.li,children:b},`child-${V}`));return e.jsx(Ie,{ref:r,component:c,color:"textSecondary",className:A(k.root,s),ownerState:u,...I,children:e.jsx(Be,{className:k.ol,ref:F,ownerState:u,children:Ve(S||f&&H.length<=f?H:ne(H),k.separator,y,u)})})});function $e(t){return U("MuiCardActionArea",t)}const D=T("MuiCardActionArea",["root","focusVisible","focusHighlight"]),Pe=t=>{const{classes:o}=t;return O({root:["root"],focusHighlight:["focusHighlight"]},$e,o)},De=j(Z,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(t,o)=>o.root})(z(({theme:t})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${D.focusHighlight}`]:{opacity:(t.vars||t).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${D.focusVisible} .${D.focusHighlight}`]:{opacity:(t.vars||t).palette.action.focusOpacity}}))),Le=j("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(t,o)=>o.focusHighlight})(z(({theme:t})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:t.transitions.create("opacity",{duration:t.transitions.duration.short})}))),Ee=h.forwardRef(function(o,r){const a=W({props:o,name:"MuiCardActionArea"}),{children:i,className:s,focusVisibleClassName:c,...p}=a,g=a,n=Pe(g);return e.jsxs(De,{className:A(n.root,s),focusVisibleClassName:A(c,n.focusVisible),ref:r,ownerState:g,...p,children:[i,e.jsx(Le,{className:n.focusHighlight,ownerState:g})]})});function Ne(t){return U("MuiSkeleton",t)}T("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const Te=t=>{const{classes:o,variant:r,animation:a,hasChildren:i,width:s,height:c}=t;return O({root:["root",r,a,i&&"withChildren",i&&!s&&"fitContent",i&&!c&&"heightAuto"]},Ne,o)},L=Y`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`,E=Y`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`,Ue=typeof L!="string"?_`
        animation: ${L} 2s ease-in-out 0.5s infinite;
      `:null,We=typeof E!="string"?_`
        &::after {
          animation: ${E} 2s linear 0.5s infinite;
        }
      `:null,Oe=j("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:r}=t;return[o.root,o[r.variant],r.animation!==!1&&o[r.animation],r.hasChildren&&o.withChildren,r.hasChildren&&!r.width&&o.fitContent,r.hasChildren&&!r.height&&o.heightAuto]}})(z(({theme:t})=>{const o=ce(t.shape.borderRadius)||"px",r=de(t.shape.borderRadius);return{display:"block",backgroundColor:t.vars?t.vars.palette.Skeleton.bg:C(t.palette.text.primary,t.palette.mode==="light"?.11:.13),height:"1.2em",variants:[{props:{variant:"text"},style:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${r}${o}/${Math.round(r/.6*10)/10}${o}`,"&:empty:before":{content:'"\\00a0"'}}},{props:{variant:"circular"},style:{borderRadius:"50%"}},{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:({ownerState:a})=>a.hasChildren,style:{"& > *":{visibility:"hidden"}}},{props:({ownerState:a})=>a.hasChildren&&!a.width,style:{maxWidth:"fit-content"}},{props:({ownerState:a})=>a.hasChildren&&!a.height,style:{height:"auto"}},{props:{animation:"pulse"},style:Ue||{animation:`${L} 2s ease-in-out 0.5s infinite`}},{props:{animation:"wave"},style:{position:"relative",overflow:"hidden",WebkitMaskImage:"-webkit-radial-gradient(white, black)","&::after":{background:`linear-gradient(
                90deg,
                transparent,
                ${(t.vars||t).palette.action.hover},
                transparent
              )`,content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}}},{props:{animation:"wave"},style:We||{"&::after":{animation:`${E} 2s linear 0.5s infinite`}}}]}})),N=h.forwardRef(function(o,r){const a=W({props:o,name:"MuiSkeleton"}),{animation:i="pulse",className:s,component:c="span",height:p,style:g,variant:n="text",width:l,...m}=a,f={...a,animation:i,component:c,variant:n,hasChildren:!!m.children},y=Te(f);return e.jsx(Oe,{as:c,ref:r,className:A(y.root,s),ownerState:f,...m,style:{width:l,height:p,...g}})}),Fe=R(e.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"})),Ge=({memory:t={id:"1",title:"Family Picnic",date:"2023-06-15",type:"photo",content:"",location:"Central Park",people:["Mom","Dad","Sister"],filter:"polaroid"}})=>{const o=ee(),[r,a]=h.useState(null),i=!!r,[s,c]=h.useState(!1),[p,g]=h.useState(!0),n=u=>{u.stopPropagation(),a(u.currentTarget)},l=u=>{u&&u.stopPropagation(),a(null)},m=()=>{o(`/memory/${t.id}`)},f=()=>{c(!0),g(!1)},y=()=>{g(!1)},I=()=>{switch(t.filter){case"polaroid":return{border:"15px solid white",boxShadow:"0 4px 15px rgba(0, 0, 0, 0.1)",transform:"rotate(-2deg)",mb:2};case"sepia":return{filter:"sepia(100%)",border:"5px solid #d4b483",mb:2};case"vintage":return{filter:"grayscale(50%)",border:"8px solid #f5f5f5",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.15)",mb:2};default:return{mb:2}}},S=()=>{switch(t.type){case"photo":return e.jsxs(d,{sx:{position:"relative",overflow:"hidden",height:200},children:[p&&e.jsx(N,{variant:"rectangular",width:"100%",height:"100%",animation:"wave"}),s?e.jsx(d,{sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"background.paper"},children:e.jsx(M,{sx:{fontSize:40,color:"text.secondary"}})}):e.jsx("img",{src:t.content,alt:t.title,onError:f,onLoad:y,style:{width:"100%",height:"100%",objectFit:"cover",display:p?"none":"block",...I()}}),e.jsx(d,{sx:{position:"absolute",top:10,right:10,bgcolor:"rgba(255, 255, 255, 0.8)",borderRadius:"50%",p:.5},children:e.jsx(M,{color:"primary",fontSize:"small"})})]});case"voice":return e.jsxs(d,{sx:{height:200,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",bgcolor:C("#2196f3",.1),position:"relative",overflow:"hidden",p:2},children:[e.jsx(he,{sx:{bgcolor:C("#2196f3",.8),width:64,height:64,mb:2,boxShadow:"0 4px 10px rgba(0, 0, 0, 0.15)","&:hover":{transform:"scale(1.1)",bgcolor:C("#2196f3",1)},transition:"all 0.3s ease"},children:e.jsx(q,{sx:{fontSize:40,color:"white"}})}),e.jsx(x,{variant:"subtitle1",sx:{fontWeight:500},children:"Voice Recording"}),e.jsx(d,{sx:{width:"100%",mt:2},children:e.jsx(be,{filePath:t.content,showControls:!1})})]});case"text":return e.jsxs(d,{sx:{p:3,bgcolor:C("#9c27b0",.05),borderRadius:2,mb:0,height:200,display:"flex",alignItems:"flex-start",justifyContent:"center",flexDirection:"column",position:"relative",overflow:"hidden"},children:[e.jsx(P,{sx:{fontSize:30,color:C("#9c27b0",.6),mb:2}}),e.jsxs(x,{variant:"body1",color:"text.primary",sx:{fontStyle:"italic",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:4,WebkitBoxOrient:"vertical"},children:['"',t.content,'"']}),e.jsx(d,{sx:{position:"absolute",top:10,right:10,bgcolor:"rgba(255, 255, 255, 0.8)",borderRadius:"50%",p:.5},children:e.jsx(P,{color:"primary",fontSize:"small"})})]});default:return null}},B=()=>{switch(t.type){case"photo":return e.jsx(M,{fontSize:"small"});case"voice":return e.jsx(q,{fontSize:"small"});case"text":return e.jsx(P,{fontSize:"small"});default:return e.jsx(M,{fontSize:"small"})}};return e.jsx(te.div,{whileHover:{scale:1.02},whileTap:{scale:.98},transition:{type:"spring",stiffness:400,damping:17},children:e.jsxs(je,{sx:{maxWidth:345,width:"100%",borderRadius:3,overflow:"hidden",boxShadow:3,bgcolor:"background.paper",position:"relative"},children:[e.jsxs(Ee,{onClick:m,children:[S(),e.jsxs(ve,{children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs(d,{children:[e.jsx(x,{gutterBottom:!0,variant:"h6",component:"div",children:t.title}),e.jsx(x,{variant:"body2",color:"text.secondary",children:new Date(t.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsx(oe,{"aria-label":"more",id:"memory-menu-button","aria-controls":i?"memory-menu":void 0,"aria-expanded":i?"true":void 0,"aria-haspopup":"true",onClick:n,sx:{mt:-1,mr:-1},children:e.jsx(Fe,{})})]}),e.jsxs(d,{sx:{display:"flex",mt:2,flexWrap:"wrap",gap:1},children:[e.jsx(w,{icon:B(),label:t.type.charAt(0).toUpperCase()+t.type.slice(1),size:"small",color:"primary",variant:"outlined"}),t.location&&e.jsx(w,{icon:e.jsx(re,{fontSize:"small"}),label:t.location,size:"small",variant:"outlined"}),t.people&&t.people.length>0&&e.jsx(w,{icon:e.jsx(ae,{fontSize:"small"}),label:`${t.people.length} people`,size:"small",variant:"outlined"})]})]})]}),e.jsxs(pe,{id:"memory-menu",anchorEl:r,open:i,onClose:l,MenuListProps:{"aria-labelledby":"memory-menu-button"},children:[e.jsx($,{onClick:u=>{l(u),o(`/memory/${t.id}`)},children:"View Details"}),e.jsx($,{onClick:l,children:"Share Memory"}),e.jsx($,{onClick:l,children:"Edit Memory"})]})]})})},Xe=({memories:t=[]})=>{const o=ue(),r=ee(),a=o.palette.mode==="dark",i=s=>{r(`/memory/${s}`)};return t.length===0?e.jsx(se,{sx:{p:4,textAlign:"center",borderRadius:2,bgcolor:"background.paper"},children:e.jsx(x,{variant:"h6",color:"text.secondary",children:"No memories found in this time period."})}):e.jsx(xe,{sx:{width:"100%",bgcolor:"background.paper",borderRadius:2},children:t.map((s,c)=>e.jsxs(te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:c*.05},children:[e.jsx(ge,{alignItems:"flex-start",sx:{p:2,mb:c<t.length-1?2:0,borderRadius:2,bgcolor:a?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.02)",border:"1px solid",borderColor:a?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)","&:hover":{bgcolor:a?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)",cursor:"pointer"}},onClick:()=>i(s.id),children:e.jsxs(v,{container:!0,spacing:2,children:[e.jsx(v,{item:!0,xs:12,sm:3,md:2,children:e.jsxs(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},children:[e.jsx(x,{variant:"h6",color:"primary",sx:{fontWeight:"bold",textAlign:"center"},children:s.date?K(new Date(s.date),"MMM d"):"No Date"}),e.jsx(x,{variant:"body2",color:"text.secondary",sx:{textAlign:"center"},children:s.date?K(new Date(s.date),"yyyy"):""})]})}),e.jsx(v,{item:!0,xs:12,sm:9,md:10,children:e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(x,{variant:"h6",component:"div",sx:{fontWeight:"medium"},children:s.title||"Untitled Memory"}),e.jsxs(d,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:1},children:[s.location&&e.jsx(w,{icon:e.jsx(re,{fontSize:"small"}),label:s.location,size:"small",variant:"outlined"}),s.people&&s.people.length>0&&e.jsx(w,{icon:e.jsx(ae,{fontSize:"small"}),label:`${s.people.length} people`,size:"small",variant:"outlined"}),s.type&&e.jsx(w,{label:s.type.charAt(0).toUpperCase()+s.type.slice(1),size:"small",color:"primary",variant:"outlined"})]}),s.description&&e.jsx(x,{variant:"body2",color:"text.secondary",sx:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:s.description}),e.jsx(d,{sx:{display:"flex",justifyContent:"flex-end",mt:1},children:e.jsx(oe,{size:"small",color:"primary",onClick:p=>{p.stopPropagation(),i(s.id)},children:e.jsx(ye,{})})})]})})]})}),c<t.length-1&&e.jsx(me,{variant:"inset",component:"li",sx:{ml:0}})]},s.id))})},qe=R(e.jsx("path",{d:"M14.67 5v6.5H9.33V5zm1 6.5H21V5h-5.33zm-1 7.5v-6.5H9.33V19zm1-6.5V19H21v-6.5zm-7.34 0H3V19h5.33zm0-1V5H3v6.5z"})),Ke=R(e.jsx("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"})),dt=()=>{const[t,o]=h.useState("grid"),[r,a]=h.useState([]),[i,s]=h.useState(!0);h.useEffect(()=>{(async()=>{try{const{data:l,error:m}=await fe.from("memories").select("*").order("date",{ascending:!1});if(m)throw m;a(l||[])}catch(l){console.error("Error fetching memories:",l.message)}finally{s(!1)}})()},[]);const c=(n,l)=>{l!==null&&o(l)},p=r.reduce((n,l)=>{const f=new Date(l.date).toLocaleDateString("en-US",{year:"numeric",month:"long"});return n[f]||(n[f]=[]),n[f].push(l),n},{}),g=Object.keys(p).sort((n,l)=>new Date(l)-new Date(n));return i?e.jsx(J,{children:e.jsxs(d,{sx:{mb:4},children:[e.jsx(N,{variant:"rectangular",width:210,height:40}),e.jsx(d,{sx:{mt:2},children:e.jsx(v,{container:!0,spacing:3,children:[1,2,3,4,5,6].map(n=>e.jsx(v,{item:!0,xs:12,sm:6,md:4,children:e.jsx(N,{variant:"rectangular",height:300})},n))})})]})}):e.jsx(J,{children:e.jsxs(d,{sx:{mb:4,minHeight:"600px"},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(x,{variant:"h4",component:"h1",children:"Memory Timeline"}),e.jsxs(Ce,{value:t,exclusive:!0,onChange:c,"aria-label":"view mode",children:[e.jsx(Q,{value:"grid","aria-label":"grid view",children:e.jsx(qe,{})}),e.jsx(Q,{value:"list","aria-label":"list view",children:e.jsx(Ke,{})})]})]}),r.length===0?e.jsx(se,{sx:{p:4,textAlign:"center",borderRadius:2,bgcolor:"background.paper"},children:e.jsx(x,{variant:"h6",color:"text.secondary",children:"No memories found. Start creating memories to see them here!"})}):g.map(n=>e.jsxs(d,{sx:{mb:6},children:[e.jsx(x,{variant:"h5",sx:{mb:3,pb:1,borderBottom:"2px solid",borderColor:"primary.main",display:"inline-block"},children:n}),t==="list"?e.jsx(Xe,{memories:p[n]}):e.jsx(v,{container:!0,spacing:3,children:p[n].map(l=>e.jsx(v,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Ge,{memory:l,viewMode:t})},l.id))})]},n))]})})};export{ct as B,dt as M};

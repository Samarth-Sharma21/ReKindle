import{d as Y,j as e,v as q,r as i,B as x,s as r,P as L,n as h,V as G,q as R,W as U,X as $,Z as V,_ as X,I as T,w as Z,x as N,ao as E,e as _,g as J,$ as K,t as z}from"./index-BtfB-B_N.js";import{A as Q}from"./ArrowBack-B1TRvGEv.js";import{L as ee}from"./LocationOn-Cy00b6SJ.js";import{P as te}from"./People-B6NrvZ2t.js";import{S as se}from"./Share-C7fIYe6Q.js";import{B as re}from"./BreathingExercise-BIlM7GWR.js";import"./cjs-BtFRbfX4.js";import{P as oe}from"./Person-MdTIHzCP.js";import{P as ne}from"./Phone-BIDR6E2x.js";import{D as ae}from"./Delete-DaV-OQY8.js";import{E as ie}from"./Edit-C1EU5M46.js";import{A as ce}from"./Add-B4d5P_a-.js";import{A,T as W}from"./TextField-HialPBy8.js";import{D as le,a as me,b as de,c as xe}from"./DialogTitle-D99BucQW.js";import{S as he}from"./Snackbar-BKsViClE.js";import{S as ue}from"./savedlocationscard-NzeSUIQj.js";import{C as pe}from"./Container-BDNItyDy.js";import{G as I}from"./Grid-N2XWPMqC.js";import{T as ge,a as D}from"./Tabs-BlP-Ws1y.js";import"./index-BCBq5dyJ.js";import"./useFormControl-BzVZTBa5.js";import"./Home-BtgfL0XR.js";import"./ArrowForward-CR3pa1Vl.js";const F=Y(e.jsx("path",{d:"M7.58 4.08 6.15 2.65C3.75 4.48 2.17 7.3 2.03 10.5h2c.15-2.65 1.51-4.97 3.55-6.42m12.39 6.42h2c-.15-3.2-1.73-6.02-4.12-7.85l-1.42 1.43c2.02 1.45 3.39 3.77 3.54 6.42M18 11c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-6 11c.14 0 .27-.01.4-.04.65-.14 1.18-.58 1.44-1.18q.15-.36.15-.78h-4c.01 1.1.9 2 2.01 2"})),fe=()=>{const{user:k}=q(),[u,o]=i.useState([]),[f,y]=i.useState(!0),[B,m]=i.useState(!1),[p,b]=i.useState(null),[n,j]=i.useState({name:"",relationship:"",phone:""}),[g,C]=i.useState({open:!1,message:"",severity:"success"}),S=()=>{b(null),j({name:"",relationship:"",phone:""}),m(!0)},a=t=>{b(t),j({name:t.name,relationship:t.relationship,phone:t.phone}),m(!0)},v=t=>{const{name:s,value:c}=t.target;j({...n,[s]:c})};i.useEffect(()=>{(async()=>{try{y(!0);const{data:{user:s},error:c}=await N.auth.getUser();if(c||!s){y(!1);return}const{data:l,error:w}=await E.getContacts(s.id);if(w)throw w;l&&o(l)}catch(s){console.error("Error fetching contacts:",s.message),d("Failed to load contacts","error")}finally{y(!1)}})()},[]);const M=async()=>{if(!n.name||!n.phone){d("Name and phone number are required","error");return}try{const{data:{user:t},error:s}=await N.auth.getUser();if(s||!t)throw new Error("User not authenticated");if(p){const c=p.id;await E.updateContact(n,c),o(u.map(l=>l.id===p.id?{...l,...n}:l)),d("Contact updated successfully","success")}else{const{data:c,error:l}=await E.saveContact(n,t.id);if(l)throw l;const w=(c==null?void 0:c[0])||{...n,id:Date.now().toString()};o([...u,w]),d("Contact added successfully","success")}}catch(t){console.error("Error saving contact:",t.message),d("Failed to save contact","error")}m(!1)},H=async t=>{try{await E.deleteContact(t),o(u.filter(s=>s.id!==t)),d("Contact deleted","success")}catch(s){console.error("Error deleting contact:",s.message),d("Failed to delete contact","error")}},O=t=>{d(`Emergency notification sent to ${t.name}`,"info")},d=(t,s)=>{C({open:!0,message:t,severity:s})},P=()=>{C({...g,open:!1})};return e.jsxs(x,{sx:{width:"100%"},children:[e.jsx(r,{variant:"h4",component:"h2",gutterBottom:!0,children:"Emergency Contacts"}),e.jsxs(L,{elevation:3,sx:{p:3,mb:4,borderRadius:2},children:[e.jsxs(x,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(r,{variant:"h6",children:"Your Emergency Contacts"}),e.jsx(h,{variant:"contained",color:"primary",startIcon:e.jsx(ce,{}),onClick:S,children:"Add Contact"})]}),u.length===0?e.jsx(A,{severity:"info",children:"No emergency contacts added yet. Add contacts who should be notified in case of emergency."}):e.jsx(G,{children:u.map((t,s)=>e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},children:[e.jsxs(U,{sx:{bgcolor:"background.paper",mb:1,borderRadius:1},children:[e.jsx($,{children:e.jsx(oe,{color:"primary"})}),e.jsx(V,{primary:e.jsx(r,{variant:"subtitle1",fontWeight:"medium",children:t.name}),secondary:e.jsxs(e.Fragment,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",component:"span",children:t.relationship}),e.jsxs(x,{sx:{display:"flex",alignItems:"center",mt:.5},children:[e.jsx(ne,{fontSize:"small",sx:{mr:.5,color:"text.secondary"}}),e.jsx(r,{variant:"body2",color:"text.secondary",children:t.phone})]})]})}),e.jsxs(X,{children:[e.jsx(T,{edge:"end",color:"secondary",onClick:()=>O(t),sx:{mr:1},children:e.jsx(F,{})}),e.jsx(T,{edge:"end",onClick:()=>a(t),sx:{mr:1},children:e.jsx(ie,{})}),e.jsx(T,{edge:"end",onClick:()=>H(t.id),children:e.jsx(ae,{})})]})]}),s<u.length-1&&e.jsx(Z,{})]},t.id))}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mt:3},children:"These contacts will be notified in case of emergency. You can add family members, caregivers, or healthcare providers."})]}),e.jsxs(le,{open:B,onClose:()=>m(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(me,{children:p?"Edit Emergency Contact":"Add Emergency Contact"}),e.jsxs(de,{children:[e.jsx(W,{autoFocus:!0,margin:"dense",name:"name",label:"Full Name",type:"text",fullWidth:!0,variant:"outlined",value:n.name,onChange:v,sx:{mb:2,mt:1}}),e.jsx(W,{margin:"dense",name:"relationship",label:"Relationship",type:"text",fullWidth:!0,variant:"outlined",value:n.relationship,onChange:v,sx:{mb:2}}),e.jsx(W,{margin:"dense",name:"phone",label:"Phone Number",type:"tel",fullWidth:!0,variant:"outlined",value:n.phone,onChange:v})]}),e.jsxs(xe,{children:[e.jsx(h,{onClick:()=>m(!1),children:"Cancel"}),e.jsx(h,{onClick:M,variant:"contained",color:"primary",children:"Save"})]})]}),e.jsx(he,{open:g.open,autoHideDuration:4e3,onClose:P,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(A,{onClose:P,severity:g.severity,sx:{width:"100%"},children:g.message})})]})},Oe=()=>{const k=_();J().palette.mode;const{isMobile:o}=K(),[f,y]=i.useState(0),[B,m]=i.useState(!1),[p,b]=i.useState(!1),n=()=>{k(-1)},j=(a,v)=>{y(v)},g=()=>{m(!0),setTimeout(()=>{m(!1)},5e3)},C=()=>{b(!0),setTimeout(()=>{b(!1)},5e3)},S=()=>{k("/breathing-game")};return e.jsx(pe,{maxWidth:"md",sx:{mt:{xs:2,sm:3,md:4},mb:{xs:3,sm:4,md:5},px:{xs:1.5,sm:3,md:3}},children:e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},style:{width:"100%"},children:[e.jsxs(x,{sx:{display:"flex",alignItems:"center",mb:{xs:3,sm:4,md:5},flexDirection:{xs:"column",sm:"row"},gap:{xs:1.5,sm:0},width:"100%"},children:[e.jsx(h,{startIcon:e.jsx(Q,{}),onClick:n,sx:{mr:{xs:0,sm:2},alignSelf:{xs:"flex-start",sm:"center"},mb:{xs:1,sm:0}},children:"Back"}),e.jsx(r,{variant:"h4",component:"h1",sx:{fontSize:{xs:"1.5rem",sm:"2rem",md:"2.125rem"},textAlign:{xs:"center",sm:"left"},width:{xs:"100%",sm:"auto"},fontWeight:600},children:"Help Center"})]}),e.jsxs(L,{elevation:3,sx:{p:{xs:2,sm:3},mb:{xs:3,sm:4},borderRadius:3,bgcolor:a=>a.palette.mode==="dark"?"background.card":"background.subtle",color:a=>(a.palette.mode==="dark","text.primary"),border:a=>`1px solid ${a.palette.primary.main}`,boxShadow:a=>`0 4px 12px ${a.palette.mode==="dark"?"rgba(255, 168, 77, 0.2)":"rgba(255, 138, 0, 0.15)"}`},children:[e.jsx(r,{variant:"h5",gutterBottom:!0,sx:{fontSize:{xs:"1.25rem",sm:"1.5rem"},fontWeight:600,textAlign:{xs:"center",sm:"left"}},children:"Need Immediate Help?"}),e.jsx(r,{variant:"body1",paragraph:!0,sx:{fontSize:{xs:"0.875rem",sm:"1rem"},textAlign:{xs:"center",sm:"left"},mb:{xs:2,sm:2}},children:"Use these quick actions to get help right away or to calm yourself during a moment of anxiety."}),e.jsxs(I,{container:!0,spacing:2,children:[e.jsx(I,{item:!0,xs:12,sm:6,md:4,children:e.jsx(h,{variant:"contained",fullWidth:!0,size:o?"medium":"large",color:"secondary",startIcon:e.jsx(se,{}),onClick:g,sx:{py:{xs:1,sm:1.5},borderRadius:2,boxShadow:2,fontSize:{xs:"0.8rem",sm:"0.9rem",md:"1rem"},"&:hover":{boxShadow:4}},children:"Share My Location"})}),e.jsx(I,{item:!0,xs:12,sm:6,md:4,children:e.jsx(h,{variant:"contained",fullWidth:!0,size:o?"medium":"large",color:"primary",startIcon:e.jsx(F,{}),onClick:C,sx:{py:{xs:1,sm:1.5},borderRadius:2,boxShadow:2,fontSize:{xs:"0.8rem",sm:"0.9rem",md:"1rem"},"&:hover":{boxShadow:4}},children:"Alert Emergency Contacts"})}),e.jsx(I,{item:!0,xs:12,sm:6,md:4,sx:{mx:{xs:"auto",sm:0},width:{xs:"100%",sm:"auto"},mt:{xs:1,sm:0}},children:e.jsx(h,{variant:"contained",fullWidth:!0,size:o?"medium":"large",color:"secondary",startIcon:e.jsx(z,{}),onClick:S,sx:{py:{xs:1,sm:1.5},borderRadius:2,boxShadow:2,fontSize:{xs:"0.8rem",sm:"0.9rem",md:"1rem"},"&:hover":{boxShadow:4}},children:"Breathing Exercise"})})]}),B&&e.jsx(A,{severity:"success",sx:{mt:2},children:"Your location has been shared with your emergency contacts."}),p&&e.jsx(A,{severity:"info",sx:{mt:2},children:"Emergency alert has been sent to your contacts. They will contact you shortly."})]}),e.jsxs(L,{elevation:2,sx:{borderRadius:3,overflow:"hidden",boxShadow:a=>a.palette.mode==="dark"?"0 8px 16px rgba(0, 0, 0, 0.4)":"0 8px 16px rgba(0, 0, 0, 0.1)",mb:{xs:4,sm:0}},children:[e.jsxs(ge,{value:f,onChange:j,variant:o?"scrollable":"fullWidth",scrollButtons:o?"auto":!1,allowScrollButtonsMobile:!0,sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{minHeight:{xs:"48px",sm:"64px"},fontSize:{xs:"0.8rem",sm:"0.9rem"},minWidth:{xs:"auto",sm:"160px"},px:{xs:1,sm:2}}},children:[e.jsx(D,{icon:e.jsx(ee,{}),label:o?"":"Location Sharing",iconPosition:"start","aria-label":"Location Sharing"}),e.jsx(D,{icon:e.jsx(te,{}),label:o?"":"Emergency Contacts",iconPosition:"start","aria-label":"Emergency Contacts"}),e.jsx(D,{icon:e.jsx(z,{}),label:o?"":"Breathing Exercise",iconPosition:"start","aria-label":"Breathing Exercise"})]}),f===0&&e.jsxs(x,{sx:{p:{xs:2,sm:3}},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,sx:{fontSize:{xs:"1.1rem",sm:"1.25rem"},fontWeight:600,textAlign:{xs:"center",md:"left"},mb:{xs:1.5,sm:2}},children:"Share Your Location"}),e.jsx(r,{variant:"body2",paragraph:!0,color:"text.secondary",sx:{textAlign:{xs:"center",sm:"left"},mb:{xs:2,sm:2.5}},children:"Your location can be shared with your emergency contacts to help them find you in case of an emergency."}),e.jsx(ue,{})]}),f===1&&e.jsxs(x,{sx:{p:{xs:2,sm:3}},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,sx:{fontSize:{xs:"1.1rem",sm:"1.25rem"},fontWeight:600,textAlign:{xs:"center",md:"left"},mb:{xs:1.5,sm:2}},children:"Emergency Contacts"}),e.jsx(r,{variant:"body2",paragraph:!0,color:"text.secondary",sx:{textAlign:{xs:"center",sm:"left"},mb:{xs:2,sm:2.5}},children:"Add and manage your emergency contacts who will be notified when you need help."}),e.jsx(fe,{})]}),f===2&&e.jsxs(x,{sx:{p:{xs:2,sm:3}},children:[e.jsx(r,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600,fontSize:{xs:"1.1rem",sm:"1.25rem"},textAlign:{xs:"center",md:"left"},mb:{xs:1.5,sm:2}},children:"Breathing Exercise"}),e.jsx(r,{variant:"body2",paragraph:!0,color:"text.secondary",sx:{mb:{xs:2,sm:3},textAlign:{xs:"center",sm:"left"}},children:"Follow this guided breathing exercise to help calm yourself during moments of anxiety."}),e.jsx(re,{}),e.jsx(x,{sx:{mt:3,textAlign:"center"},children:e.jsx(h,{variant:"outlined",color:"primary",size:o?"medium":"large",startIcon:e.jsx(z,{}),onClick:S,sx:{borderRadius:2,py:{xs:.75,sm:1},px:{xs:2,sm:3},fontSize:{xs:"0.8rem",sm:"0.9rem"}},children:"Open Full Breathing Game"})})]})]})]})})};export{Oe as default};

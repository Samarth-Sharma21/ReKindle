import{n as O,o as V,r as l,p as q,j as e,x as Y,y as _,z as F,c as N,u as J,a as H,k as K,m as Q,B as X,I as y,g as f,P as M,V as A,d as j,e as Z}from"./index-7zbgi2qQ.js";import{M as ee}from"./MyLocation-Bl-wM_tn.js";import{D as te}from"./Delete-BrPxrsmS.js";import{E as se}from"./Edit-CZNxsY8v.js";import{A as oe}from"./ArrowBack-c1su4zvR.js";import{C as ae}from"./Container-DZq_lvjJ.js";import{S as ne}from"./Snackbar-BzNAqPSb.js";import{A as re}from"./Alert-BRbQA1fK.js";import{G as n}from"./Grid-1SM4JlKV.js";import{T as b}from"./TextField-CCuzYXtS.js";import{I as E}from"./InputAdornment-DguS799i.js";import{C as ie,a as ce}from"./CardContent-CX6Hpo0X.js";import{D as le,a as de,b as pe,c as ue}from"./DialogTitle-DloplamJ.js";import"./useFormControl-CcItWjiD.js";function me(i){return O("MuiCardActions",i)}V("MuiCardActions",["root","spacing"]);const xe=i=>{const{classes:s,disableSpacing:m}=i;return F({root:["root",!m&&"spacing"]},me,s)},he=Y("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(i,s)=>{const{ownerState:m}=i;return[s.root,!m.disableSpacing&&s.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),ge=l.forwardRef(function(s,m){const d=q({props:s,name:"MuiCardActions"}),{disableSpacing:r=!1,className:h,...a}=d,c={...d,disableSpacing:r},L=xe(c);return e.jsx(he,{className:_(L.root,h),ownerState:c,ref:m,...a})}),k=N(e.jsx("path",{d:"M20 1v3h3v2h-3v3h-2V6h-3V4h3V1zm-8 12c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m2-9.75V7h3v3h2.92c.05.39.08.79.08 1.2 0 3.32-2.67 7.25-8 11.8-5.33-4.55-8-8.48-8-11.8C4 6.22 7.8 3 12 3c.68 0 1.35.08 2 .25"})),fe=N(e.jsx("path",{d:"M12 2 4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"})),je=N(e.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})),We=()=>{const i=J(),s=H(),{user:m}=K(),d=s.palette.mode==="dark",[r,h]=l.useState(()=>{const t=localStorage.getItem("savedLocations");return t?JSON.parse(t):[]}),[a,c]=l.useState({name:"",address:"",notes:""}),[L,D]=l.useState(!1),[v,R]=l.useState(null),[g,z]=l.useState(""),[C,p]=l.useState({open:!1,message:"",severity:"success"});l.useEffect(()=>{localStorage.setItem("savedLocations",JSON.stringify(r))},[r]);const S=(t=null)=>{t!==null?(c(r[t]),R(t)):(c({name:"",address:"",notes:""}),R(null)),D(!0)},I=()=>{D(!1)},w=t=>{const{name:o,value:x}=t.target;c({...a,[o]:x})},P=()=>{if(!a.name||!a.address){p({open:!0,message:"Name and address are required",severity:"error"});return}if(v!==null){const t=[...r];t[v]=a,h(t),p({open:!0,message:"Location updated successfully",severity:"success"})}else h([...r,a]),p({open:!0,message:"Location saved successfully",severity:"success"});I()},U=t=>{const o=r.filter((x,u)=>u!==t);h(o),p({open:!0,message:"Location deleted",severity:"info"})},B=t=>{const o=encodeURIComponent(t);window.open(`https://www.google.com/maps/search/?api=1&query=${o}`,"_blank")},$=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{const{latitude:o,longitude:x}=t.coords;fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${o}&lon=${x}`).then(u=>u.json()).then(u=>{const G=u.display_name||`${o}, ${x}`;c({...a,address:G})}).catch(u=>{console.error("Error getting address:",u),c({...a,address:`${o}, ${x}`})})},t=>{console.error("Error getting location:",t),p({open:!0,message:"Unable to get your current location",severity:"error"})}):p({open:!0,message:"Geolocation is not supported by your browser",severity:"error"})},T=()=>{p({...C,open:!1})},W=r.filter(t=>t.name.toLowerCase().includes(g.toLowerCase())||t.address.toLowerCase().includes(g.toLowerCase())||t.notes.toLowerCase().includes(g.toLowerCase()));return e.jsx(ae,{maxWidth:"lg",sx:{py:4},children:e.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs(X,{sx:{display:"flex",alignItems:"center",mb:4},children:[e.jsx(y,{onClick:()=>i(-1),sx:{mr:2},color:"primary",children:e.jsx(oe,{})}),e.jsx(f,{variant:"h4",component:"h1",sx:{fontWeight:600},children:"Saved Locations"})]}),e.jsx(ne,{open:C.open,autoHideDuration:5e3,onClose:T,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(re,{onClose:T,severity:C.severity,sx:{width:"100%"},children:C.message})}),e.jsx(M,{elevation:2,sx:{p:3,mb:4,borderRadius:3,background:d?A(s.palette.background.paper,.6):s.palette.background.paper},children:e.jsxs(n,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(n,{item:!0,xs:12,md:8,children:e.jsx(b,{fullWidth:!0,placeholder:"Search locations...",value:g,onChange:t=>z(t.target.value),InputProps:{startAdornment:e.jsx(E,{position:"start",children:e.jsx(je,{color:"primary"})})},variant:"outlined",sx:{bgcolor:"background.paper",borderRadius:2}})}),e.jsx(n,{item:!0,xs:12,md:4,children:e.jsx(j,{fullWidth:!0,variant:"contained",color:"primary",startIcon:e.jsx(k,{}),onClick:()=>S(),sx:{py:1.5,borderRadius:2,textTransform:"none",fontWeight:600,boxShadow:"0 4px 10px rgba(0, 0, 0, 0.1)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 15px rgba(0, 0, 0, 0.15)"},transition:"all 0.3s ease"},children:"Add New Location"})})]})}),e.jsx(n,{container:!0,spacing:3,children:W.length>0?W.map((t,o)=>e.jsx(n,{item:!0,xs:12,md:6,children:e.jsxs(ie,{elevation:2,sx:{borderRadius:3,height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"0 8px 20px rgba(0, 0, 0, 0.15)"},bgcolor:d?A(s.palette.background.paper,.6):s.palette.background.paper},children:[e.jsxs(ce,{sx:{flexGrow:1},children:[e.jsx(f,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:t.name}),e.jsx(f,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:t.address}),t.notes&&e.jsx(f,{variant:"body2",color:"text.secondary",sx:{mt:1},children:t.notes})]}),e.jsxs(ge,{sx:{p:2,pt:0},children:[e.jsx(j,{size:"small",startIcon:e.jsx(fe,{}),onClick:()=>B(t.address),color:"primary",variant:"contained",sx:{mr:1,borderRadius:2,textTransform:"none"},children:"Navigate"}),e.jsx(y,{size:"small",onClick:()=>S(o),color:"primary",children:e.jsx(se,{})}),e.jsx(y,{size:"small",onClick:()=>U(o),color:"error",children:e.jsx(te,{})})]})]})},o)):e.jsx(n,{item:!0,xs:12,children:e.jsxs(M,{elevation:1,sx:{p:4,textAlign:"center",borderRadius:3,bgcolor:d?A(s.palette.background.paper,.6):s.palette.background.paper},children:[e.jsx(f,{variant:"h6",color:"text.secondary",children:g?"No locations match your search":"No saved locations yet"}),e.jsx(j,{variant:"contained",color:"primary",startIcon:e.jsx(k,{}),onClick:()=>S(),sx:{mt:2,borderRadius:2,textTransform:"none"},children:"Add Your First Location"})]})})}),e.jsxs(le,{open:L,onClose:I,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,p:1}},children:[e.jsx(de,{sx:{fontWeight:600},children:v!==null?"Edit Location":"Add New Location"}),e.jsx(pe,{children:e.jsxs(n,{container:!0,spacing:2,sx:{mt:.5},children:[e.jsx(n,{item:!0,xs:12,children:e.jsx(b,{fullWidth:!0,label:"Location Name",name:"name",value:a.name,onChange:w,required:!0,variant:"outlined"})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(b,{fullWidth:!0,label:"Address",name:"address",value:a.address,onChange:w,required:!0,variant:"outlined",InputProps:{endAdornment:e.jsx(E,{position:"end",children:e.jsx(Z,{title:"Use current location",children:e.jsx(y,{onClick:$,edge:"end",children:e.jsx(ee,{})})})})}})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(b,{fullWidth:!0,label:"Notes (optional)",name:"notes",value:a.notes,onChange:w,multiline:!0,rows:3,variant:"outlined"})})]})}),e.jsxs(ue,{sx:{px:3,pb:3},children:[e.jsx(j,{onClick:I,color:"inherit",children:"Cancel"}),e.jsx(j,{onClick:P,variant:"contained",color:"primary",startIcon:e.jsx(k,{}),sx:{borderRadius:2,textTransform:"none"},children:v!==null?"Update Location":"Save Location"})]})]})]})})};export{We as default};

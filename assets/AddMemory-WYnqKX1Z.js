import{z as oe,y as ne,r as a,E as ae,ab as ie,j as e,J as F,H as se,K as L,N as le,Q as q,U as E,ac as ce,ad as de,a7 as H,a8 as K,B as u,s as j,aa as A,n as B,w as ue,x as I,d as pe,P as Z,q as me,I as X,e as fe,v as he,ae as xe}from"./index-BtfB-B_N.js";import{A as ge}from"./ArrowBack-B1TRvGEv.js";import{L as ee}from"./LocationOn-Cy00b6SJ.js";import"./cjs-BtFRbfX4.js";import{P as be}from"./Photo-fWDsNKKG.js";import{M as O,T as ye}from"./TextSnippet-YnlRn8C_.js";import{P as ve}from"./People-B6NrvZ2t.js";import{A as je}from"./Add-B4d5P_a-.js";import{A as Ce}from"./AddPhotoAlternate-D6azELfZ.js";import{P as we,a as Pe}from"./Pause-CapNRRRI.js";import{D as Re}from"./Delete-DaV-OQY8.js";import{S as Se}from"./Slider-HtmJREDl.js";import{S as re}from"./Stack-DoVjQwnO.js";import{G as M}from"./Grid-N2XWPMqC.js";import{F as Q,I as D,S as Y,T as $,A as W}from"./TextField-HialPBy8.js";import{C as te}from"./Chip-CLwvU_ec.js";import{S as Ie}from"./Snackbar-BKsViClE.js";import{C as ke}from"./Container-BDNItyDy.js";import"./visuallyHidden-Dan1xhjv.js";import"./useFormControl-BzVZTBa5.js";function Le(t){return oe("MuiLinearProgress",t)}ne("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const z=4,_=K`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,Ue=typeof _!="string"?H`
        animation: ${_} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,V=K`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,Me=typeof V!="string"?H`
        animation: ${V} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,G=K`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,Te=typeof G!="string"?H`
        animation: ${G} 3s infinite linear;
      `:null,Ae=t=>{const{classes:r,variant:o,color:x}=t,g={root:["root",`color${L(x)}`,o],dashed:["dashed",`dashedColor${L(x)}`],bar1:["bar","bar1",`barColor${L(x)}`,(o==="indeterminate"||o==="query")&&"bar1Indeterminate",o==="determinate"&&"bar1Determinate",o==="buffer"&&"bar1Buffer"],bar2:["bar","bar2",o!=="buffer"&&`barColor${L(x)}`,o==="buffer"&&`color${L(x)}`,(o==="indeterminate"||o==="query")&&"bar2Indeterminate",o==="buffer"&&"bar2Buffer"]};return le(g,Le,r)},J=(t,r)=>t.vars?t.vars.palette.LinearProgress[`${r}Bg`]:t.palette.mode==="light"?ce(t.palette[r].main,.62):de(t.palette[r].main,.5),Be=F("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(t,r)=>{const{ownerState:o}=t;return[r.root,r[`color${L(o.color)}`],r[o.variant]]}})(q(({theme:t})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(t.palette).filter(E()).map(([r])=>({props:{color:r},style:{backgroundColor:J(t,r)}})),{props:({ownerState:r})=>r.color==="inherit"&&r.variant!=="buffer",style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),$e=F("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(t,r)=>{const{ownerState:o}=t;return[r.dashed,r[`dashedColor${L(o.color)}`]]}})(q(({theme:t})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(t.palette).filter(E()).map(([r])=>{const o=J(t,r);return{props:{color:r},style:{backgroundImage:`radial-gradient(${o} 0%, ${o} 16%, transparent 42%)`}}})]})),Te||{animation:`${G} 3s infinite linear`}),Ee=F("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(t,r)=>{const{ownerState:o}=t;return[r.bar,r.bar1,r[`barColor${L(o.color)}`],(o.variant==="indeterminate"||o.variant==="query")&&r.bar1Indeterminate,o.variant==="determinate"&&r.bar1Determinate,o.variant==="buffer"&&r.bar1Buffer]}})(q(({theme:t})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(t.palette).filter(E()).map(([r])=>({props:{color:r},style:{backgroundColor:(t.vars||t).palette[r].main}})),{props:{variant:"determinate"},style:{transition:`transform .${z}s linear`}},{props:{variant:"buffer"},style:{zIndex:1,transition:`transform .${z}s linear`}},{props:({ownerState:r})=>r.variant==="indeterminate"||r.variant==="query",style:{width:"auto"}},{props:({ownerState:r})=>r.variant==="indeterminate"||r.variant==="query",style:Ue||{animation:`${_} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),Ne=F("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(t,r)=>{const{ownerState:o}=t;return[r.bar,r.bar2,r[`barColor${L(o.color)}`],(o.variant==="indeterminate"||o.variant==="query")&&r.bar2Indeterminate,o.variant==="buffer"&&r.bar2Buffer]}})(q(({theme:t})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(t.palette).filter(E()).map(([r])=>({props:{color:r},style:{"--LinearProgressBar2-barColor":(t.vars||t).palette[r].main}})),{props:({ownerState:r})=>r.variant!=="buffer"&&r.color!=="inherit",style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:r})=>r.variant!=="buffer"&&r.color==="inherit",style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(t.palette).filter(E()).map(([r])=>({props:{color:r,variant:"buffer"},style:{backgroundColor:J(t,r),transition:`transform .${z}s linear`}})),{props:({ownerState:r})=>r.variant==="indeterminate"||r.variant==="query",style:{width:"auto"}},{props:({ownerState:r})=>r.variant==="indeterminate"||r.variant==="query",style:Me||{animation:`${V} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),Fe=a.forwardRef(function(r,o){const x=ae({props:r,name:"MuiLinearProgress"}),{className:g,color:f="primary",value:C,valueBuffer:b,variant:h="indeterminate",...c}=x,d={...x,color:f,variant:h},w=Ae(d),R=ie(),p={},i={bar1:{},bar2:{}};if((h==="determinate"||h==="buffer")&&C!==void 0){p["aria-valuenow"]=Math.round(C),p["aria-valuemin"]=0,p["aria-valuemax"]=100;let s=C-100;R&&(s=-s),i.bar1.transform=`translateX(${s}%)`}if(h==="buffer"&&b!==void 0){let s=(b||0)-100;R&&(s=-s),i.bar2.transform=`translateX(${s}%)`}return e.jsxs(Be,{className:se(w.root,g),ownerState:d,role:"progressbar",...p,ref:o,...c,children:[h==="buffer"?e.jsx($e,{className:w.dashed,ownerState:d}):null,e.jsx(Ee,{className:w.bar1,ownerState:d,style:i.bar1}),h==="determinate"?null:e.jsx(Ne,{className:w.bar2,ownerState:d,style:i.bar2})]})}),qe=({memoryData:t,setMemoryData:r})=>{var S;const[o,x]=a.useState("photo"),[g,f]=a.useState(""),[C,b]=a.useState(""),[h,c]=a.useState({open:!1,message:"",severity:"success"}),d=n=>{const{name:l,value:U}=n.target;r({...t,[l]:U})},w=n=>{const l=n.target.value;x(l),r({...t,type:l}),l==="photo"&&b("")},R=()=>{var n;g.trim()&&!((n=t.people)!=null&&n.includes(g.trim()))&&(r({...t,people:[...t.people||[],g.trim()]}),f(""))},p=n=>{r({...t,people:(t.people||[]).filter(l=>l!==n)})},i=async n=>{try{const l=n.name.split(".").pop(),k=`public/${`${Math.random()}.${l}`}`,{error:T}=await I.storage.from("memories").upload(k,n);if(T)throw T;const{data:{publicUrl:y}}=I.storage.from("memories").getPublicUrl(k);b(URL.createObjectURL(n)),r({...t,content:y,type:"photo"})}catch(l){console.error("Error uploading file:",l.message),m("Error uploading file. Please try again.","error")}},s=async n=>{try{const l=new File([n],"voice-recording.mp3",{type:"audio/mpeg"}),k=`public/${`${Math.random()}.mp3`}`;await I.storage.from("memories").remove([k]);const{error:T}=await I.storage.from("memories").upload(k,l,{contentType:"audio/mpeg",cacheControl:"3600",upsert:!0});if(T)throw T;const{data:{publicUrl:y}}=I.storage.from("memories").getPublicUrl(k);console.log("Uploaded audio URL:",y);try{if(!(await fetch(y)).ok)throw new Error("Audio file not accessible")}catch(v){throw console.error("Error testing audio URL:",v),new Error("Audio file not accessible")}r({...t,content:y,type:"voice"}),m("Voice recording saved successfully!","success")}catch(l){console.error("Error uploading audio:",l.message),m("Error uploading audio. Please try again.","error")}},m=(n,l)=>{c({open:!0,message:n,severity:l})},P=()=>{c({...h,open:!1})};return e.jsxs(u,{sx:{width:"100%",maxWidth:800,mx:"auto"},children:[e.jsx(j,{variant:"h5",component:"h2",gutterBottom:!0,sx:{mb:3},children:"Memory Details"}),e.jsx(u,{children:e.jsxs(M,{container:!0,spacing:3,children:[e.jsx(M,{item:!0,xs:12,children:e.jsxs(Q,{fullWidth:!0,children:[e.jsx(D,{id:"memory-type-label",children:"Memory Type"}),e.jsxs(Y,{labelId:"memory-type-label",id:"memory-type",value:o,label:"Memory Type",onChange:w,children:[e.jsx(A,{value:"photo",children:e.jsxs(u,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(be,{sx:{mr:1}}),"Photo Memory"]})}),e.jsx(A,{value:"voice",children:e.jsxs(u,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(O,{sx:{mr:1}}),"Voice Memory"]})}),e.jsx(A,{value:"text",children:e.jsxs(u,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ye,{sx:{mr:1}}),"Text Memory"]})})]})]})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx($,{required:!0,fullWidth:!0,label:"Memory Title",name:"title",value:t.title,onChange:d})}),e.jsx(M,{item:!0,xs:12,sm:6,children:e.jsx($,{fullWidth:!0,label:"Date",type:"date",name:"date",value:t.date,onChange:d,InputLabelProps:{shrink:!0}})}),e.jsx(M,{item:!0,xs:12,children:e.jsx($,{fullWidth:!0,label:"Location",name:"location",value:t.location||"",onChange:d,placeholder:"Enter or select a location",InputProps:{startAdornment:e.jsx(ee,{color:"action",sx:{mr:1}})}})}),e.jsxs(M,{item:!0,xs:12,children:[e.jsxs(u,{sx:{display:"flex",alignItems:{xs:"stretch",sm:"flex-start"},flexDirection:{xs:"column",sm:"row"},gap:{xs:2,sm:0},mb:1},children:[e.jsx($,{fullWidth:!0,label:"Add People in this Memory",value:g,onChange:n=>f(n.target.value),onKeyPress:n=>n.key==="Enter"&&R(),InputProps:{startAdornment:e.jsx(ve,{color:"action",sx:{mr:1}})},sx:{mr:{xs:0,sm:1}}}),e.jsx(B,{variant:"contained",color:"primary",onClick:R,disabled:!g.trim(),sx:{alignSelf:{xs:"flex-end",sm:"auto"},minWidth:{xs:"100px",sm:"auto"}},children:e.jsx(je,{})})]}),e.jsx(u,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:(S=t.people)==null?void 0:S.map(n=>e.jsx(te,{label:n,onDelete:()=>p(n),color:"primary",variant:"outlined"},n))})]}),e.jsx(M,{item:!0,xs:12,children:e.jsx(ue,{sx:{my:2}})}),e.jsxs(M,{item:!0,xs:12,children:[e.jsx(j,{variant:"h6",gutterBottom:!0,children:"Memory Content"}),o==="photo"&&e.jsxs(u,{children:[e.jsx(j,{variant:"h6",gutterBottom:!0,children:"Upload a Photo"}),e.jsx(Oe,{onPhotoSelected:i,defaultImage:C}),e.jsxs(u,{sx:{mt:2},children:[e.jsx(j,{variant:"subtitle1",gutterBottom:!0,children:"Photo Filter"}),e.jsxs(Q,{fullWidth:!0,sx:{mb:2},children:[e.jsx(D,{id:"filter-label",children:"Apply Filter"}),e.jsxs(Y,{labelId:"filter-label",id:"filter",name:"filter",value:t.filter||"none",label:"Apply Filter",onChange:d,children:[e.jsx(A,{value:"none",children:"No Filter"}),e.jsx(A,{value:"polaroid",children:"Polaroid Frame"}),e.jsx(A,{value:"sepia",children:"Sepia Tone"}),e.jsx(A,{value:"vintage",children:"Vintage"})]})]}),C&&e.jsx(u,{sx:{mt:2,position:"relative"},children:e.jsx("img",{src:C,alt:"Memory Preview",style:{width:"100%",maxHeight:"300px",objectFit:"contain",borderRadius:t.filter==="none"?"4px":"0",border:t.filter==="polaroid"?"15px solid white":t.filter==="sepia"?"5px solid #d4b483":t.filter==="vintage"?"8px solid #f5f5f5":"none",boxShadow:t.filter!=="none"?"0 4px 8px rgba(0, 0, 0, 0.15)":"none",transform:t.filter==="polaroid"?"rotate(-2deg)":"none",filter:t.filter==="sepia"?"sepia(100%)":t.filter==="vintage"?"grayscale(50%)":"none"}})})]})]}),o==="voice"&&e.jsxs(u,{children:[e.jsx(j,{variant:"h6",gutterBottom:!0,children:"Record a Voice Memory"}),e.jsx(ze,{onRecordingComplete:s})]}),o==="text"&&e.jsx($,{fullWidth:!0,multiline:!0,rows:6,label:"Write your memory",name:"content",value:t.content,onChange:d,placeholder:"Share your thoughts, stories, or memories here..."})]})]})}),e.jsx(Ie,{open:h.open,autoHideDuration:4e3,onClose:P,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(W,{onClose:P,severity:h.severity,sx:{width:"100%"},children:h.message})})]})},Oe=({onPhotoSelected:t,defaultImage:r})=>{const[o,x]=a.useState(!1),[g,f]=a.useState(!1),[C,b]=a.useState(r?!0:null),[h,c]=a.useState(r||null),d=a.useRef(null);a.useEffect(()=>{r&&(c(r),b(!0))},[r]),a.useEffect(()=>{r&&(c(r),b(!0))},[r]);const w=()=>{d.current.click()},R=p=>{const i=p.target.files[0];i&&t(i)};return e.jsxs(u,{sx:{width:"100%",height:"200px",border:"2px dashed",borderColor:"primary.main",borderRadius:2,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",position:"relative",overflow:"hidden",bgcolor:"background.paper"},onClick:w,children:[r?e.jsx("img",{src:r,alt:"Memory preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsxs(e.Fragment,{children:[e.jsx(Ce,{sx:{fontSize:48,color:"primary.main",mb:1}}),e.jsx(j,{variant:"body1",color:"textSecondary",children:"Click to upload a photo"}),e.jsx(j,{variant:"caption",color:"textSecondary",children:"Supports: JPG, PNG, GIF"})]}),e.jsx("input",{type:"file",ref:d,onChange:R,accept:"image/*",style:{display:"none"}})]})},We=pe(e.jsx("path",{d:"M6 6h12v12H6z"})),ze=({onRecordingComplete:t})=>{const[r,o]=a.useState(!1),[x,g]=a.useState(0),[f,C]=a.useState(null),[b,h]=a.useState(!1),[c,d]=a.useState(0),[w,R]=a.useState(0),p=a.useRef(null),i=a.useRef([]),s=a.useRef(null),m=a.useRef(new Audio),P=a.useRef(null);a.useEffect(()=>()=>{clearInterval(s.current),clearInterval(P.current),f&&URL.revokeObjectURL(f)},[f]),a.useEffect(()=>{f&&(m.current.src=f,m.current.onloadedmetadata=()=>{R(m.current.duration)},m.current.onended=()=>{h(!1),d(0),clearInterval(P.current)})},[f]);const S=async()=>{try{const y=await navigator.mediaDevices.getUserMedia({audio:!0});p.current=new MediaRecorder(y),i.current=[],p.current.ondataavailable=v=>{v.data.size>0&&i.current.push(v.data)},p.current.onstop=()=>{const v=new Blob(i.current,{type:"audio/wav"}),N=URL.createObjectURL(v);C(N),t&&t(N)},p.current.start(),o(!0),g(0),s.current=setInterval(()=>{g(v=>v+1)},1e3)}catch(y){console.error("Error starting recording:",y)}},n=()=>{p.current&&r&&(p.current.stop(),clearInterval(s.current),o(!1),p.current.stream.getTracks().forEach(y=>y.stop()))},l=()=>{b?(m.current.pause(),clearInterval(P.current)):(m.current.play(),P.current=setInterval(()=>{d(m.current.currentTime)},100)),h(!b)},U=()=>{f&&URL.revokeObjectURL(f),C(null),d(0),R(0),h(!1),clearInterval(P.current)},k=y=>{const v=Math.floor(y/60),N=Math.floor(y%60);return`${v.toString().padStart(2,"0")}:${N.toString().padStart(2,"0")}`},T=(y,v)=>{m.current&&(m.current.currentTime=v,d(v))};return e.jsx(Z,{elevation:2,sx:{p:3,borderRadius:2},children:f?e.jsxs(u,{children:[e.jsx(j,{variant:"h6",gutterBottom:!0,children:"Voice Memory"}),e.jsxs(u,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(X,{color:"primary",onClick:l,sx:{mr:1},children:b?e.jsx(we,{}):e.jsx(Pe,{})}),e.jsxs(u,{sx:{flexGrow:1,display:"flex",alignItems:"center"},children:[e.jsx(j,{variant:"body2",sx:{minWidth:45},children:k(c)}),e.jsx(Se,{value:c,max:w||100,onChange:T,"aria-label":"audio position",sx:{mx:2}}),e.jsx(j,{variant:"body2",sx:{minWidth:45},children:k(w)})]})]}),e.jsxs(re,{direction:"row",spacing:2,justifyContent:"center",sx:{mt:3},children:[e.jsx(B,{variant:"outlined",color:"error",startIcon:e.jsx(Re,{}),onClick:U,children:"Delete"}),e.jsx(B,{variant:"outlined",color:"primary",startIcon:e.jsx(O,{}),onClick:S,children:"Record New"})]})]}):e.jsxs(u,{sx:{textAlign:"center"},children:[e.jsx(me.div,{whileHover:{scale:1.05},whileTap:{scale:.95},initial:{scale:1},style:{display:"inline-block"},children:e.jsx(X,{color:r?"error":"primary",sx:{width:80,height:80,bgcolor:r?"error.light":"primary.light",color:"white","&:hover":{bgcolor:r?"error.main":"primary.main"},mb:2},onClick:r?n:S,children:r?e.jsx(We,{fontSize:"large"}):e.jsx(O,{fontSize:"large"})})}),e.jsx(j,{variant:"h6",gutterBottom:!0,children:r?"Recording in progress...":"Tap to Start Recording"}),r&&e.jsxs(u,{sx:{width:"100%",mt:2},children:[e.jsx(Fe,{color:"error",sx:{height:10,borderRadius:5}}),e.jsx(j,{variant:"body1",sx:{mt:1,fontWeight:"bold"},children:k(x)})]})]})})},cr=()=>{const t=fe(),{user:r}=he(),{triggerRefresh:o}=xe(),[x,g]=a.useState(!1),[f,C]=a.useState(""),[b,h]=a.useState([]),[c,d]=a.useState({title:"",description:"",content:"",date:new Date().toISOString().split("T")[0],type:"text",people:[],filter:"none",location:""});a.useEffect(()=>{(async()=>{try{const{data:{user:s}}=await I.auth.getUser();if(!s)return;let m=s.id;if((r==null?void 0:r.type)==="family"){const{data:l,error:U}=await I.from("family_members").select("patient_id").eq("id",s.id).single();if(U)throw U;m=l.patient_id}const{data:P,error:S}=await I.from("memories").select("location").eq("user_id",m).not("location","is",null).not("location","eq","").order("created_at",{ascending:!1}).limit(10);if(S)throw S;const n=[...new Set(P.map(l=>l.location))];h(n)}catch(s){console.error("Error fetching recent locations:",s.message)}})()},[r]);const w=i=>{d(s=>({...s,location:i}))},R=async()=>{try{const{data:{user:i},error:s}=await I.auth.getUser();if(s||!i)throw new Error("User not authenticated! Please log in.");let m=i.id;if((r==null?void 0:r.type)==="family"){const{data:S,error:n}=await I.from("family_members").select("patient_id").eq("id",i.id).single();if(n||!S)throw new Error("Could not find connected patient");m=S.patient_id}const{error:P}=await I.from("memories").insert([{user_id:m,title:c.title,description:c.description,content:c.content,date:c.date,type:c.type,location:c.location,people:c.people,filter:c.filter}]);if(P)throw P;o(),g(!0),setTimeout(()=>{(r==null?void 0:r.type)==="family"?t("/family/dashboard"):t("/patient/dashboard")},2e3)}catch(i){C(i.message)}},p=()=>{t(-1)};return e.jsx(ke,{maxWidth:"md",sx:{mt:2,mb:4},children:e.jsxs(u,{sx:{width:"100%"},children:[e.jsxs(u,{sx:{display:"flex",alignItems:"center",mb:4},children:[e.jsx(B,{startIcon:e.jsx(ge,{}),onClick:p,sx:{mr:2},children:"Back"}),e.jsx(j,{variant:"h4",children:"Add New Memory"})]}),e.jsx(Z,{elevation:2,sx:{p:3,borderRadius:3},children:x?e.jsx(W,{severity:"success",children:"Memory saved successfully! Redirecting..."}):e.jsxs(e.Fragment,{children:[f&&e.jsx(W,{severity:"error",sx:{mb:3},children:f}),b.length>0&&e.jsxs(u,{sx:{mb:3},children:[e.jsxs(j,{variant:"subtitle1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ee,{color:"primary"}),"Recent Locations"]}),e.jsx(re,{direction:"row",spacing:1,flexWrap:"wrap",gap:1,children:b.map((i,s)=>e.jsx(te,{label:i,onClick:()=>w(i),color:c.location===i?"primary":"default",variant:c.location===i?"filled":"outlined"},s))})]}),e.jsx(qe,{memoryData:c,setMemoryData:d}),e.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[e.jsx(B,{variant:"outlined",onClick:p,sx:{borderRadius:2},children:"Cancel"}),e.jsx(B,{variant:"contained",color:"primary",onClick:R,sx:{borderRadius:2},children:"Save Memory"})]})]})})]})})};export{cr as default};
